#include <iostream>
#include "Gaming_Hub.h"
using namespace std;

void Gaming_Hub::Conect_4()
{
    char arr[6][7];
    int i, j, col;

    // Initialize the board
    for (i = 0; i < 6; i++)
        for (j = 0; j < 7; j++)
            arr[i][j] = ' ';

    int count[7] = {0}; // column fill count

    while (true)
    {
        // -------------------- Blue Input --------------------
        cout << "Blue Input: ";
        cin >> col;
        count[col - 1]++;
        arr[6 - count[col - 1]][col - 1] = 'B';

        // Print board
        for (i = 0; i < 6; i++)
        {
            for (j = 0; j < 7; j++)
                cout << arr[i][j] << " ";
            cout << endl;
        }
        cout << endl;

        // Blue Win Check
        // Horizontal
        for (i = 0; i <= 5; i++)
            for (j = 0; j <= 3; j++)
                if (arr[i][j] == 'B' && arr[i][j + 1] == 'B' && arr[i][j + 2] == 'B' && arr[i][j + 3] == 'B')
                {
                    cout << "Blue Win\n";
                    return;
                }

        // Vertical
        for (i = 0; i <= 2; i++)
            for (j = 0; j <= 6; j++)
                if (arr[i][j] == 'B' && arr[i + 1][j] == 'B' && arr[i + 2][j] == 'B' && arr[i + 3][j] == 'B')
                {
                    cout << "Blue Win\n";
                    return;
                }

        // Diagonal ↘
        for (i = 0; i <= 2; i++)
            for (j = 0; j <= 3; j++)
                if (arr[i][j] == 'B' && arr[i + 1][j + 1] == 'B' && arr[i + 2][j + 2] == 'B' && arr[i + 3][j + 3] == 'B')
                {
                    cout << "Blue Win\n";
                    return;
                }

        // Diagonal ↙
        for (i = 0; i <= 2; i++)
            for (j = 3; j <= 6; j++)
                if (arr[i][j] == 'B' && arr[i + 1][j - 1] == 'B' && arr[i + 2][j - 2] == 'B' && arr[i + 3][j - 3] == 'B')
                {
                    cout << "Blue Win\n";
                    return;
                }

        // -------------------- Red Input --------------------
        cout << "Red Input: ";
        cin >> col;
        count[col - 1]++;
        arr[6 - count[col - 1]][col - 1] = 'R';

        // Print board
        for (i = 0; i < 6; i++)
        {
            for (j = 0; j < 7; j++)
                cout << arr[i][j] << " ";
            cout << endl;
        }
        cout << endl;

        // Red Win Check
        // Horizontal
        for (i = 0; i <= 5; i++)
            for (j = 0; j <= 3; j++)
                if (arr[i][j] == 'R' && arr[i][j + 1] == 'R' && arr[i][j + 2] == 'R' && arr[i][j + 3] == 'R')
                {
                    cout << "Red Win\n";
                    return;
                }

        // Vertical
        for (i = 0; i <= 2; i++)
            for (j = 0; j <= 6; j++)
                if (arr[i][j] == 'R' && arr[i + 1][j] == 'R' && arr[i + 2][j] == 'R' && arr[i + 3][j] == 'R')
                {
                    cout << "Red Win\n";
                    return;
                }

        // Diagonal ↘
        for (i = 0; i <= 2; i++)
            for (j = 0; j <= 3; j++)
                if (arr[i][j] == 'R' && arr[i + 1][j + 1] == 'R' && arr[i + 2][j + 2] == 'R' && arr[i + 3][j + 3] == 'R')
                {
                    cout << "Red Win\n";
                    return;
                }

        // Diagonal ↙
        for (i = 0; i <= 2; i++)
            for (j = 3; j <= 6; j++)
                if (arr[i][j] == 'R' && arr[i + 1][j - 1] == 'R' && arr[i + 2][j - 2] == 'R' && arr[i + 3][j - 3] == 'R')
                {
                    cout << "Red Win\n";
                    return;
                }
    }
}
